#full-time vs part-time and gender
summary_labor <- as.data.frame(table(labor$GENDER,labor$FTPTMAIN))
latex_table(summary_labor, "Full-time anf part-time workers by gender")
# reasons for part-time vs gender
# Reasons for part time. WHYPT field
WHYPT_labels <- c(
"0" = "Other reasons",
"1" = "Own illness or disability",
"2" = "Caring for children",
"3" = "Other personal or family responsibilities",
"4" = "Going to school",
"5" = "Personal preference",
"6" = "Business conditions or could not find full-time work, looked for full-time work in last month",
"7"=	"Business conditions or could not find full-time work, did not look for full-time work in last month")
tab<-xtabs(~ WHYPT+GENDER, data=labor )
rownames(tab) <- WHYPT_labels  # adjust length accordingly
latex_table(tab, "Reasons for part-time work by gender")
#| echo: false
#| message: false
#| warning: false
#| results: 'asis'
#means for extra hours depending on gender
# Summarize mean of XTRAHRS by GENDER
summary_labor<-as.data.frame(tapply(labor$XTRAHRS, labor$GENDER, mean, na.rm = TRUE))
#function for Latex table output since it is repeated often
latex_table <- function(data, title = "Table", annotation= NULL) {
# Create gt table
tab <- data %>%
gt() %>%
tab_header(title = title)
# Convert to LaTeX and set float position to [H]
latex_code <- as.character(as_latex(tab))
latex_code <- gsub("\\\\begin\\{table\\}", "\\\\begin{table}[H]", latex_code)
# Output LaTeX code
cat(latex_code)
}
latex_table(summary_labor, "Mean of extra hours by gender")
#full-time vs part-time and gender
summary_labor <- as.data.frame(table(labor$GENDER,labor$FTPTMAIN))
latex_table(summary_labor, "Full-time anf part-time workers by gender")
# reasons for part-time vs gender
# Reasons for part time. WHYPT field
WHYPT_labels <- c(
"0" = "Other reasons",
"1" = "Own illness or disability",
"2" = "Caring for children",
"3" = "Other personal or family responsibilities",
"4" = "Going to school",
"5" = "Personal preference",
"6" = "Business conditions or could not find full-time work, looked for full-time work in last month",
"7"=	"Business conditions or could not find full-time work, did not look for full-time work in last month")
tab<-xtabs(~ WHYPT+GENDER, data=labor )
rownames(tab) <- WHYPT_labels  # adjust length accordingly
latex_table(tab, "Reasons for part-time work by gender")
tab<-as.data.frame(xtabs(~ WHYPT+GENDER, data=labor ))
rownames(tab) <- WHYPT_labels  # adjust length accordingly
tab
xtabs(~ WHYPT+GENDER, data=labor )
as.data.frame(xtabs(~ WHYPT+GENDER, data=labor ))
tab<-xtabs(~ WHYPT+GENDER, data=labor )
summary_labor <- as.data.frame.matrix(tab)
summary_labor
rownames(summary_labor) <- WHYPT_labels  #
summary_labor
#| echo: false
#| message: false
#| warning: false
#| results: 'asis'
#means for extra hours depending on gender
# Summarize mean of XTRAHRS by GENDER
summary_labor<-as.data.frame(tapply(labor$XTRAHRS, labor$GENDER, mean, na.rm = TRUE))
#function for Latex table output since it is repeated often
latex_table <- function(data, title = "Table", annotation= NULL) {
# Create gt table
tab <- data %>%
gt() %>%
tab_header(title = title)
# Convert to LaTeX and set float position to [H]
latex_code <- as.character(as_latex(tab))
latex_code <- gsub("\\\\begin\\{table\\}", "\\\\begin{table}[H]", latex_code)
# Output LaTeX code
cat(latex_code)
}
latex_table(summary_labor, "Mean of extra hours by gender")
#full-time vs part-time and gender
summary_labor <- as.data.frame(table(labor$GENDER,labor$FTPTMAIN))
latex_table(summary_labor, "Full-time anf part-time workers by gender")
# reasons for part-time vs gender
# Reasons for part time. WHYPT field
WHYPT_labels <- c(
"0" = "Other reasons",
"1" = "Own illness or disability",
"2" = "Caring for children",
"3" = "Other personal or family responsibilities",
"4" = "Going to school",
"5" = "Personal preference",
"6" = "Business conditions or<br> could not find full-time work,<br> looked for full-time work<br> in last month",
"7"=	"Business conditions or<br> could not find full-time work,<br> did not look for full-time work<br> in last month")
tab<-xtabs(~ WHYPT+GENDER, data=labor )
summary_labor <- as.data.frame.matrix(tab)
rownames(summary_labor) <- WHYPT_labels  #
latex_table(summary_labor
, "Reasons for part-time work by gender")
#Conclusion : women stay away from work taking care of the children approx 10x then men
summary_labor <- as.data.frame.matrix(tab)
summary_labor$reason <- WHYPT_labels  #
latex_table(summary_labor
, "Reasons for part-time work by gender")
# Summarize mean of XTRAHRS by GENDER
summary_labor<-as.data.frame.matrix(tapply(labor$XTRAHRS, labor$GENDER, mean, na.rm = TRUE))
# Summarize mean of XTRAHRS by GENDER
summary_labor<-as.data.frame.matrix(tapply(labor$XTRAHRS, labor$GENDER, mean, na.rm = TRUE))
# Summarize mean of XTRAHRS by GENDER
summary_labor<-as.data.frame(tapply(labor$XTRAHRS, labor$GENDER, mean, na.rm = TRUE))
#function for Latex table output since it is repeated often
latex_table <- function(data, title = "Table", annotation= NULL) {
# Create gt table
tab <- data %>%
gt() %>%
tab_header(title = title)
# Convert to LaTeX and set float position to [H]
latex_code <- as.character(as_latex(tab))
latex_code <- gsub("\\\\begin\\{table\\}", "\\\\begin{table}[H]", latex_code)
# Output LaTeX code
cat(latex_code)
}
latex_table(summary_labor, "Mean of extra hours by gender")
#| echo: false
#| message: false
#| warning: false
#| results: 'asis'
#means for extra hours depending on gender
# Summarize mean of XTRAHRS by GENDER
summary_labor<-as.data.frame(tapply(labor$XTRAHRS, labor$GENDER, mean, na.rm = TRUE))
#function for Latex table output since it is repeated often
latex_table <- function(data, title = "Table", annotation= NULL) {
# Create gt table
tab <- data %>%
gt() %>%
tab_header(title = title)
# Convert to LaTeX and set float position to [H]
latex_code <- as.character(as_latex(tab))
latex_code <- gsub("\\\\begin\\{table\\}", "\\\\begin{table}[H]", latex_code)
# Output LaTeX code
cat(latex_code)
}
latex_table(summary_labor, "Mean of extra hours by gender")
#full-time vs part-time and gender
summary_labor <- as.data.frame(table(labor$GENDER,labor$FTPTMAIN))
latex_table(summary_labor, "Full-time anf part-time workers by gender")
# reasons for part-time vs gender
# Reasons for part time. WHYPT field
WHYPT_labels <- c(
"0" = "Other reasons",
"1" = "Own illness or disability",
"2" = "Caring for children",
"3" = "Other personal or family responsibilities",
"4" = "Going to school",
"5" = "Personal preference",
"6" = "Business conditions or<br> could not find full-time work,<br> looked for full-time work<br> in last month",
"7"=	"Business conditions or<br> could not find full-time work,<br> did not look for full-time work<br> in last month")
tab<-xtabs(~ WHYPT+GENDER, data=labor )
summary_labor <- as.data.frame.matrix(tab)
summary_labor$reason <- WHYPT_labels  #
latex_table(summary_labor
, "Reasons for part-time work by gender")
#Conclusion : women stay away from work taking care of the children approx 10x then men
#full-time vs part-time and gender
summary_labor <- as.data.frame.matrix(table(labor$GENDER,labor$FTPTMAIN))
latex_table(summary_labor, "Full-time anf part-time workers by gender")
table(labor$GENDER,labor$FTPTMAIN)
tab <- table(labor$GENDER, labor$FTPTMAIN)
# Convert to data frame keeping wide structure
summary_labor <- as.data.frame.matrix(tab)
# Optionally add row names as a proper column
summary_labor <- cbind(GENDER = rownames(summary_labor), summary_labor)
rownames(summary_labor) <- NULL
latex_table(summary_labor, "Full-time anf part-time workers by gender")
# Summarize mean of XTRAHRS by GENDER
class(tapply(labor$XTRAHRS, labor$GENDER, mean, na.rm = TRUE))
# Summarize mean of XTRAHRS by GENDER
summary_labor<-as.data.frame(tapply(labor$XTRAHRS, labor$GENDER, mean, na.rm = TRUE))
summary_table
summary_labor
# Summarize mean of XTRAHRS by GENDER
summary_labor<-as.data.frame(tapply(labor$XTRAHRS, labor$GENDER, mean, na.rm = TRUE))
summary_labor <- cbind(GENDER = rownames(summary_labor), summary_labor)
rownames(summary_labor) <- NULL
latex_table(summary_labor, "Mean of extra hours by gender")
# Summarize mean of XTRAHRS by GENDER
tab<-tapply(labor$XTRAHRS, labor$GENDER, mean, na.rm = TRUE)
summary_labor<-as.data.frame(tab)
summary_labor <- cbind(GENDER = rownames(summary_labor), summary_labor)
rownames(summary_labor) <- NULL
latex_table(summary_labor, "Mean of extra hours by gender")
#| echo: false
#| message: false
#| warning: false
#| results: 'asis'
#function for Latex table output since it is repeated often
latex_table <- function(data, title = "Table", annotation= NULL) {
# Create gt table
tab <- data %>%
gt() %>%
tab_header(title = title)
# Convert to LaTeX and set float position to [H]
latex_code <- as.character(as_latex(tab))
latex_code <- gsub("\\\\begin\\{table\\}", "\\\\begin{table}[H]", latex_code)
# Output LaTeX code
cat(latex_code)
}
#---------------------------------------------------------
#means for extra hours depending on gender
# Summarize mean of XTRAHRS by GENDER
tab<-tapply(labor$XTRAHRS, labor$GENDER, mean, na.rm = TRUE)
summary_labor<-as.data.frame(tab)
summary_labor <- cbind(GENDER = rownames(summary_labor), summary_labor)
rownames(summary_labor) <- NULL
latex_table(summary_labor, "Mean of extra hours by gender")
#full-time vs part-time for each gender
tab <- table(labor$GENDER, labor$FTPTMAIN)
# Convert to data frame keeping wide structure
summary_labor <- as.data.frame.matrix(tab)
# Optionally add row names as a proper column
summary_labor <- cbind(GENDER = rownames(summary_labor), summary_labor)
rownames(summary_labor) <- NULL
latex_table(summary_labor, "Full-time anf part-time workers by gender")
# reasons for part-time vs gender
# Reasons for part time. WHYPT field
WHYPT_labels <- c(
"0" = "Other reasons",
"1" = "Own illness or disability",
"2" = "Caring for children",
"3" = "Other personal or family responsibilities",
"4" = "Going to school",
"5" = "Personal preference",
"6" = "Business conditions or<br> could not find full-time work,<br> looked for full-time work<br> in last month",
"7"=	"Business conditions or<br> could not find full-time work,<br> did not look for full-time work<br> in last month")
tab<-xtabs(~ WHYPT+GENDER, data=labor )
summary_labor <- as.data.frame.matrix(tab)
summary_labor$Reason <- WHYPT_labels  #
latex_table(summary_labor, "Reasons for part-time work by gender")
#Conclusion : women stay away from work taking care of the children approx 10x then men
#| echo: false
#| message: false
#| warning: false
#| results: 'asis'
#function for Latex table output since it is repeated often
latex_table <- function(data, title = "Table", annotation= NULL) {
# Create gt table
tab <- data %>%
gt() %>%
tab_header(title = title)
# Convert to LaTeX and set float position to [H]
latex_code <- as.character(as_latex(tab))
latex_code <- gsub("\\\\begin\\{table\\}", "\\\\begin{table}[H]", latex_code)
# Output LaTeX code
cat(latex_code)
}
#---------------------------------------------------------
#means for extra hours depending on gender
# Summarize mean of XTRAHRS by GENDER
tab<-tapply(labor$XTRAHRS, labor$GENDER, mean, na.rm = TRUE)
summary_labor<-as.data.frame(tab)
colnames(summary_labor)<-c("Mean of extra hours")
summary_labor <- cbind(GENDER = rownames(summary_labor), summary_labor)
rownames(summary_labor) <- NULL
latex_table(summary_labor, "Mean of extra hours by gender")
#full-time vs part-time for each gender
tab <- table(labor$GENDER, labor$FTPTMAIN)
# Convert to data frame keeping wide structure
summary_labor <- as.data.frame.matrix(tab)
# Optionally add row names as a proper column
summary_labor <- cbind(GENDER = rownames(summary_labor), summary_labor)
rownames(summary_labor) <- NULL
latex_table(summary_labor, "Full-time anf part-time workers by gender")
# reasons for part-time vs gender
# Reasons for part time. WHYPT field
WHYPT_labels <- c(
"0" = "Other reasons",
"1" = "Own illness or disability",
"2" = "Caring for children",
"3" = "Other personal or family responsibilities",
"4" = "Going to school",
"5" = "Personal preference",
"6" = "Business conditions or<br> could not find full-time work,<br> looked for full-time work<br> in last month",
"7"=	"Business conditions or<br> could not find full-time work,<br> did not look for full-time work<br> in last month")
tab<-xtabs(~ WHYPT+GENDER, data=labor )
summary_labor <- as.data.frame.matrix(tab)
summary_labor$Reason <- WHYPT_labels  #
latex_table(summary_labor, "Reasons for part-time work by gender")
#Conclusion : women stay away from work taking care of the children approx 10x then men
#| message: false
#| warning: false
#| include: false
#loading libraries
library(plyr)
library(dplyr)
library(ggplot2)
library(ggpmisc)
library(patchwork)
library(descr)
library(stringr) # for formatting input data - working with strings
library(pdftools) # reading pdf file
# library(lubridate) handling datas ant time - did not use it
library(dbscan) # for clustering
library(tidyr)
library(pivottabler) # for pivot tables
library(gt) # tables
library(umap) #clustering
#reading date from Stat Ca
labor<-read.table(file='data/pub0325.txt',header=TRUE,sep="\t",stringsAsFactors = TRUE)
#indicating columns as factors
names<-as.vector(colnames(labor),mode="character")
names_factor<-setdiff(names,c("REC_NUM","FINALWT","PAIDOT","UNPAIDOT",
"XTRAHRS","WKSAWAY","UHRSMAIN","AHRSMAIN",
"UTOTHRS","ATOTHRS","HRSAWAY","TENURE","PREVTEN","HRLYEARN"))
labor[names_factor] <- lapply(labor[names_factor], as.factor)
labor$IMMIG<-revalue(labor$IMMIG, c("1" = "Immigrant,not more 10y", "2" = "Immigrant,more 10y", "3"="Non-immigrant"))
labor$GENDER <- revalue(labor$GENDER, c("1" = "Male", "2" = "Female"))
labor$FTPTMAIN<-revalue(labor$FTPTMAIN,c("1"="Full-time","2"="Part-time"))
AGE_12_labels <- c(
"1" = "15 to 19",
"2" = "20 to 24",
"3" = "25 to 29",
"4" = "30 to 34",
"5" = "35 to 39",
"6" = "40 to 44",
"7" = "45 to 49",
"8" = "50 to 54",
"9" = "55 to 59",
"10" = "60 to 64",
"11" = "65 to 69",
"12" = "70+"
)
# Reasons for part time. WHYPT field
WHYPT_labels <- c(
"0" = "Other reasons",
"1" = "Own illness or disability",
"2" = "Caring for children",
"3" = "Other personal or family responsibilities",
"4" = "Going to school",
"5" = "Personal preference",
"6" = "Business conditions or\\\\ could not find full-time work,\\\\ looked for full-time work\\\\ in last month",
"7"=	"Business conditions or\\\\ could not find full-time work,\\\\ did not look for full-time work\\\\ in last month")
#| echo: false
#| message: false
#| warning: false
#| results: 'asis'
#function for Latex table output since it is repeated often
latex_table <- function(data, title = "Table", annotation= NULL) {
# Create gt table
tab <- data %>%
gt() %>%
tab_header(title = title)
# Convert to LaTeX and set float position to [H]
latex_code <- as.character(as_latex(tab))
latex_code <- gsub("\\\\begin\\{table\\}", "\\\\begin{table}[H]", latex_code)
# Output LaTeX code
cat(latex_code)
}
#---------------------------------------------------------
#means for extra hours depending on gender
# Summarize mean of XTRAHRS by GENDER
tab<-tapply(labor$XTRAHRS, labor$GENDER, mean, na.rm = TRUE)
summary_labor<-as.data.frame(tab)
colnames(summary_labor)<-c("Mean of extra hours")
summary_labor <- cbind(GENDER = rownames(summary_labor), summary_labor)
rownames(summary_labor) <- NULL
latex_table(summary_labor, "Mean of extra hours by gender")
#full-time vs part-time for each gender
tab <- table(labor$GENDER, labor$FTPTMAIN)
# Convert to data frame keeping wide structure
summary_labor <- as.data.frame.matrix(tab)
# Optionally add row names as a proper column
summary_labor <- cbind(GENDER = rownames(summary_labor), summary_labor)
rownames(summary_labor) <- NULL
latex_table(summary_labor, "Full-time anf part-time workers by gender")
# reasons for part-time vs gender
tab<-xtabs(~ WHYPT+GENDER, data=labor )
summary_labor <- as.data.frame.matrix(tab)
summary_labor$Reason <- WHYPT_labels  #
latex_table(summary_labor, "Reasons for part-time work by gender")
#Conclusion : women stay away from work taking care of the children approx 10x then men
#| echo: false
#| message: false
#| warning: false
#| results: 'asis'
#function for Latex table output since it is repeated often
latex_table <- function(data, title = "Table", annotation= NULL) {
# Create gt table
tab <- data %>%
gt() %>%
tab_header(title = title)
# Convert to LaTeX and set float position to [H]
latex_code <- as.character(as_latex(tab))
latex_code <- gsub("\\\\begin\\{table\\}", "\\\\begin{table}[H]", latex_code)
# Output LaTeX code
cat(latex_code)
}
#---------------------------------------------------------
#means for extra hours depending on gender
# Summarize mean of XTRAHRS by GENDER
tab<-tapply(labor$XTRAHRS, labor$GENDER, mean, na.rm = TRUE)
summary_labor<-as.data.frame(tab)
colnames(summary_labor)<-c("Mean of extra hours")
summary_labor <- cbind(GENDER = rownames(summary_labor), summary_labor)
rownames(summary_labor) <- NULL
latex_table(summary_labor, "Mean of extra hours by gender")
#full-time vs part-time for each gender
tab <- table(labor$GENDER, labor$FTPTMAIN)
# Convert to data frame keeping wide structure
summary_labor <- as.data.frame.matrix(tab)
# Optionally add row names as a proper column
summary_labor <- cbind(GENDER = rownames(summary_labor), summary_labor)
rownames(summary_labor) <- NULL
latex_table(summary_labor, "Full-time anf part-time workers by gender")
# reasons for part-time vs gender
tab<-xtabs(~ WHYPT+GENDER, data=labor )
summary_labor <- as.data.frame.matrix(tab)
summary_labor$Reason <- WHYPT_labels  #
summary_labo$Reason <- gsub(
"Business conditions or could not find full-time work, looked for full-time work in last month",
"\\\\makecell{Business conditions or \\\\ could not find full-time work, \\\\ looked for full-time work in last month}",
summary_labo$Reason
)
#| echo: false
#| message: false
#| warning: false
#| results: 'asis'
#function for Latex table output since it is repeated often
latex_table <- function(data, title = "Table", annotation= NULL) {
# Create gt table
tab <- data %>%
gt() %>%
tab_header(title = title)
# Convert to LaTeX and set float position to [H]
latex_code <- as.character(as_latex(tab))
latex_code <- gsub("\\\\begin\\{table\\}", "\\\\begin{table}[H]", latex_code)
# Output LaTeX code
cat(latex_code)
}
#---------------------------------------------------------
#means for extra hours depending on gender
# Summarize mean of XTRAHRS by GENDER
tab<-tapply(labor$XTRAHRS, labor$GENDER, mean, na.rm = TRUE)
summary_labor<-as.data.frame(tab)
colnames(summary_labor)<-c("Mean of extra hours")
summary_labor <- cbind(GENDER = rownames(summary_labor), summary_labor)
rownames(summary_labor) <- NULL
latex_table(summary_labor, "Mean of extra hours by gender")
#full-time vs part-time for each gender
tab <- table(labor$GENDER, labor$FTPTMAIN)
# Convert to data frame keeping wide structure
summary_labor <- as.data.frame.matrix(tab)
# Optionally add row names as a proper column
summary_labor <- cbind(GENDER = rownames(summary_labor), summary_labor)
rownames(summary_labor) <- NULL
latex_table(summary_labor, "Full-time anf part-time workers by gender")
# reasons for part-time vs gender
tab<-xtabs(~ WHYPT+GENDER, data=labor )
summary_labor <- as.data.frame.matrix(tab)
summary_labor$Reason <- WHYPT_labels  #
summary_labor$Reason <- gsub(
"Business conditions or could not find full-time work, looked for full-time work in last month",
"\\\\makecell{Business conditions or \\\\ could not find full-time work, \\\\ looked for full-time work in last month}",
summary_labo$Reason
)
#| echo: false
#| message: false
#| warning: false
#| results: 'asis'
#function for Latex table output since it is repeated often
latex_table <- function(data, title = "Table", annotation= NULL) {
# Create gt table
tab <- data %>%
gt() %>%
tab_header(title = title)
# Convert to LaTeX and set float position to [H]
latex_code <- as.character(as_latex(tab))
latex_code <- gsub("\\\\begin\\{table\\}", "\\\\begin{table}[H]", latex_code)
# Output LaTeX code
cat(latex_code)
}
#---------------------------------------------------------
#means for extra hours depending on gender
# Summarize mean of XTRAHRS by GENDER
tab<-tapply(labor$XTRAHRS, labor$GENDER, mean, na.rm = TRUE)
summary_labor<-as.data.frame(tab)
colnames(summary_labor)<-c("Mean of extra hours")
summary_labor <- cbind(GENDER = rownames(summary_labor), summary_labor)
rownames(summary_labor) <- NULL
latex_table(summary_labor, "Mean of extra hours by gender")
#full-time vs part-time for each gender
tab <- table(labor$GENDER, labor$FTPTMAIN)
# Convert to data frame keeping wide structure
summary_labor <- as.data.frame.matrix(tab)
# Optionally add row names as a proper column
summary_labor <- cbind(GENDER = rownames(summary_labor), summary_labor)
rownames(summary_labor) <- NULL
latex_table(summary_labor, "Full-time anf part-time workers by gender")
# reasons for part-time vs gender
tab<-xtabs(~ WHYPT+GENDER, data=labor )
summary_labor <- as.data.frame.matrix(tab)
summary_labor$Reason <- WHYPT_labels  #
summary_labor$Reason <- gsub(
"Business conditions or could not find full-time work, looked for full-time work in last month",
"\\\\makecell{Business conditions or \\\\ could not find full-time work, \\\\ looked for full-time work in last month}",
summary_labor$Reason
)
latex_table(summary_labor, "Reasons for part-time work by gender")
#Conclusion : women stay away from work taking care of the children approx 10x then men
